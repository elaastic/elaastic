<!--
  ~ Elaastic - formative assessment system
  ~ Copyright (C) 2019. University Toulouse 1 Capitole, University Toulouse 3 Paul Sabatier
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->
<!-- TODO GÃ©rer le lien pour en apprendre plus sur la grille DRAXO -->
<!-- This fragment is used to display the evaluation of a Draxo method -->
<div th:fragment="draxoShow(model, hideName)"
     th:remove="tag"
     xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">

    <!-- Link to the css file for the custom DRAXO grid -->
    <link rel="stylesheet" type="text/css" th:href="@{'/css/draxo-show.css?version=2'}"/>

    <div class="ui container evaluation" th:with="explanation = ${model.draxoEvaluation.getExplanation()}">
        <div class="evaluation-entete evaluation-border">
            <div class="evaluateurs">
                <span th:text="#{draxo.reviewer} + ' :'">Reviewer</span>
                <span class="ui label" th:styleappend="${hideName} ? 'display: none'"
                      th:text="${model.userCanDisplayStudentsIdentity} ? ${model.graderName} : ${model.graderNum}"></span>
            </div>
            <div class="score">
                <span th:text="#{draxo.score} + ' :'">Score</span>
                <span class="ui label" th:text="${model.score ?: '-'}">2.5</span>
            </div>
        </div>
        <div class="grille-DRAXO evaluation-border">
            <h4 th:text="#{draxo.evaluationGrid}">Evaluation grid</h4>
            <div class="frise">
                <th:block
                        th:each="criteria : ${T(org.elaastic.questions.assignment.sequence.peergrading.draxo.criteria.Criteria).values()}"
                        th:with="optionType = ${criteria.getOptionType(model.draxoEvaluation.get(criteria))}">

                    <div class="custom-step"
                         th:classappend="${optionType?.getCSSClass()}">

                        <div class="contenue">
                            <span class="lettreCapital" th:text="${criteria}">R</span>
                            <span th:text="#{${criteria.getMessageI18nKey(T(org.elaastic.questions.assignment.sequence.peergrading.draxo.criteria.CriteriaMessageKey).Header)}}">...</span>

                            <i class="green check icon" th:if="${optionType?.name == 'POSITIVE'}"></i>
                            <i class="red x icon" th:if="${optionType?.name == 'NEGATIVE'}"></i>
                            <i class="question icon" th:if="${optionType?.name == 'UNKNOWN'}"></i>
                        </div>
                    </div>
                </th:block>
            </div>

            <th:block th:with="rejectedCriteria = ${model.draxoEvaluation.getRejectedCriteria()}">
                <div class="zone-commentaire" th:if="${rejectedCriteria}">
                    <div class="intitule">
                        <h4 th:text="#{${rejectedCriteria.getMessageI18nKey(T(org.elaastic.questions.assignment.sequence.peergrading.draxo.criteria.CriteriaMessageKey).Question)}}+' :'">
                            The answer is readable :</h4>
                        <div class="ui label" th:text="#{${model.draxoEvaluation.get(rejectedCriteria).codeI18n}}">
                            No
                        </div>
                    </div>
                    <div class="commentaire" th:if="${model.draxoEvaluation.getExplanation()}">
                        <h4 th:text="#{draxo.feedback.label}">Feedback:</h4>
                        <p class="commentaire-text ui label" th:text="${model.draxoEvaluation.getExplanation()}">
                            I am a relevant and constructive comment, in order to explain why the answer provided above is not decipherable.
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                        </p>
                    </div>
                </div>
            </th:block>
        </div>
    </div>
</div>